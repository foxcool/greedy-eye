syntax = "proto3";

package services;

import "google/protobuf/field_mask.proto";
import "google/api/annotations.proto";
import "api/models/user.proto";

option go_package = "github.com/foxcool/greedy-eye/internal/api/services";

// UserService handles user authentication, profile management, and related business logic.
// See storage_service.proto for CRUD operations on users and accounts.
service UserService {
  // Updates user-specific preferences.
  rpc UpdateUserPreferences(UpdateUserPreferencesRequest) returns (models.User) {
    option (google.api.http) = {
      put: "/api/v1/users/{user_id}/preferences"
      body: "*"
    };
  }
}

message UpdateUserPreferencesRequest {
  string user_id = 1;
  map<string, string> preferences_to_update = 2; // Only the preferences to change
  google.protobuf.FieldMask update_mask = 3; // Alternatively, use a mask to specify which keys in the map to update/delete
}
